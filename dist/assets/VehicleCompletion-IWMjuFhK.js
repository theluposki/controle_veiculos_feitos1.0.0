import{_ as q,u as T,r as o,o as O,a as l,c,b as s,w as h,v,F as B,e as j,t as m,p as F,f as R}from"./index-xaUO-3mf.js";import{d as _}from"./dexie-SNI3UijA.js";const C=r=>(F("data-v-9491763d"),r=r(),R(),r),S={class:"VehicleCompletion"},U={class:"inputs"},$=C(()=>s("i",{class:"ri-add-line"},null,-1)),P=[$],A={key:0,class:"list"},E=["onClick"],M={class:"marca"},z={class:"placa"},L={class:"qtd-peca"},N={class:"dataInput"},W={key:1,class:"dataEmpty"},G=C(()=>s("i",{class:"ri-share-forward-2-line"},null,-1)),H=[G],J={__name:"VehicleCompletion",setup(r){const{push:b}=T(),i=o(null),d=o(null),u=o(null),p=o([]),n=o([]),y=o("");O(async()=>{p.value=await D(),n.value=await w(),n.value.length>0&&f()});const k=t=>{b(`/ViewDetails/${t}`)};async function w(){const t=new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date);return(await _.dados.where("data").equals(t).toArray()).map(a=>({marca:a.marca,placa:a.placa,qtdPecas:a.qtdPecas,data:g(a.data)}))}function f(){const t=Object.keys(n.value[0]).join(",")+`
`,e=n.value.map(a=>Object.values(a).join(",")).join(`
`);y.value=t+e}function V(){const t=`Confira os dados do dia:


`+y.value;window.open("https://api.whatsapp.com/send?text="+encodeURIComponent(t))}const I=async()=>{if(!(!i.value||!d.value||!u.value))try{await _.dados.put({marca:i.value.toUpperCase(),placa:d.value.toUpperCase(),qtdPecas:u.value,data:new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date)}),p.value=await D(),n.value=await w(),f()}catch{console.error("Ouve um erro ao finalizar veículo.")}};async function D(){try{const t=new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date);return await _.dados.where("data").equals(t).toArray()}catch(t){console.error(`Error while searching data: ${t.stack||t}`)}}const g=t=>{const e=t.split("/"),a=`${e[2]}-${e[1]}-${e[0]}`,x=new Date(a);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(x)};return(t,e)=>(l(),c("div",S,[s("div",U,[h(s("input",{type:"text",tabindex:"1","onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),placeholder:"marca",style:{"text-transform":"uppercase"}},null,512),[[v,i.value]]),h(s("input",{type:"text",tabindex:"2","onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),placeholder:"placa",style:{"text-transform":"uppercase"}},null,512),[[v,d.value]]),h(s("input",{type:"text",tabindex:"3","onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),placeholder:"qtd peças"},null,512),[[v,u.value]]),s("button",{class:"btn",tabindex:"4",onClick:I},P)]),p.value.length>0?(l(),c("ul",A,[(l(!0),c(B,null,j(p.value,a=>(l(),c("li",{class:"item-list",key:a.id,onClick:x=>k(a.id)},[s("span",M,m(a.marca),1),s("span",z,m(a.placa),1),s("span",L,m(a.qtdPecas),1),s("span",N,m(g(a.data)),1)],8,E))),128))])):(l(),c("div",W," Adicione um veículo. ")),s("div",{class:"btnShared",onClick:V},H)]))}},X=q(J,[["__scopeId","data-v-9491763d"]]);export{X as default};
