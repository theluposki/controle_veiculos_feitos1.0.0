import{_ as q,u as I,r as o,o as O,a as l,c,b as t,w as h,v as m,F as j,e as S,t as v,p as T,f as U}from"./index-2ELTg9z-.js";import{d as _}from"./dexie-SNI3UijA.js";const x=r=>(T("data-v-087a187b"),r=r(),U(),r),E={class:"VehicleCompletion"},P={class:"inputs"},A=x(()=>t("i",{class:"ri-add-line"},null,-1)),B=[A],F={key:0,class:"list"},R=["onClick"],$={class:"marca"},H={class:"placa"},M={class:"qtd-peca"},z={class:"dataInput"},L={key:1,class:"dataEmpty"},N=x(()=>t("i",{class:"ri-share-forward-2-line"},null,-1)),W=[N],G={__name:"VehicleCompletion",setup(r){const{push:C}=I(),i=o(null),d=o(null),u=o(null),p=o([]),n=o([]),w=o("");O(async()=>{p.value=await D(),n.value=await y(),n.value.length>0&&f()});const g=e=>{C(`/ViewDetails/${e}`)};async function y(){const e=new Date;return(await _.dados.where("data").aboveOrEqual(e.setHours(0,0,0,0)).toArray()).map(a=>({marca:a.marca,placa:a.placa,qtdPecas:a.qtdPecas,data:b(a.data)}))}function f(){const e=Object.keys(n.value[0]).join(",")+`
`,s=n.value.map(a=>Object.values(a).join(",")).join(`
`);w.value=e+s}function k(){const e=`Confira os dados do dia:


`+w.value;window.open("https://api.whatsapp.com/send?text="+encodeURIComponent(e))}const V=async()=>{if(!(!i.value||!d.value||!u.value))try{await _.dados.put({marca:i.value.toUpperCase(),placa:d.value.toUpperCase(),qtdPecas:u.value,data:new Date().getTime()}),p.value=await D(),n.value=await y(),f()}catch{console.error("Ouve um erro ao finalizar veículo.")}};async function D(){try{const e=new Date().setHours(0,0,0,0);return await _.dados.where("data").aboveOrEqual(e).toArray()}catch(e){console.error(`Error while searching data: ${e.stack||e}`)}}const b=e=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(e));return(e,s)=>(l(),c("div",E,[t("div",P,[h(t("input",{type:"text",tabindex:"1","onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a),placeholder:"marca",style:{"text-transform":"uppercase"}},null,512),[[m,i.value]]),h(t("input",{type:"text",tabindex:"2","onUpdate:modelValue":s[1]||(s[1]=a=>d.value=a),placeholder:"placa",style:{"text-transform":"uppercase"}},null,512),[[m,d.value]]),h(t("input",{type:"text",tabindex:"3","onUpdate:modelValue":s[2]||(s[2]=a=>u.value=a),placeholder:"qtd peças"},null,512),[[m,u.value]]),t("button",{class:"btn",tabindex:"4",onClick:V},B)]),p.value.length>0?(l(),c("ul",F,[(l(!0),c(j,null,S(p.value,a=>(l(),c("li",{class:"item-list",key:a.id,onClick:J=>g(a.id)},[t("span",$,v(a.marca),1),t("span",H,v(a.placa),1),t("span",M,v(a.qtdPecas),1),t("span",z,v(b(a.data)),1)],8,R))),128))])):(l(),c("div",L," Adicione um veículo. ")),t("div",{class:"btnShared",onClick:k},W)]))}},X=q(G,[["__scopeId","data-v-087a187b"]]);export{X as default};
