import{_ as k,r as o,o as q,a as l,c,b as t,w as h,v as m,F as V,e as I,t as v,p as O,f as j}from"./index-Cb2nOCJd.js";import{d as _}from"./dexie-SNI3UijA.js";const b=r=>(O("data-v-c0e6498c"),r=r(),j(),r),S={class:"VehicleCompletion"},T={class:"inputs"},U=b(()=>t("i",{class:"ri-add-line"},null,-1)),E=[U],P={key:0,class:"list"},A={class:"marca"},B={class:"placa"},F={class:"qtd-peca"},H={class:"dataInput"},M={key:1,class:"dataEmpty"},R=b(()=>t("i",{class:"ri-share-forward-2-line"},null,-1)),z=[R],L={__name:"VehicleCompletion",setup(r){const i=o(null),d=o(null),u=o(null),p=o([]),n=o([]),w=o("");q(async()=>{p.value=await D(),n.value=await y(),n.value.length>0&&f()});async function y(){const e=new Date;return(await _.dados.where("data").aboveOrEqual(e.setHours(0,0,0,0)).toArray()).map(a=>({marca:a.marca,placa:a.placa,qtdPecas:a.qtdPecas,data:x(a.data)}))}function f(){const e=Object.keys(n.value[0]).join(",")+`
`,s=n.value.map(a=>Object.values(a).join(",")).join(`
`);w.value=e+s}function C(){const e=`Confira os dados do dia:


`+w.value;window.open("https://api.whatsapp.com/send?text="+encodeURIComponent(e))}const g=async()=>{if(!(!i.value||!d.value||!u.value))try{await _.dados.put({marca:i.value.toUpperCase(),placa:d.value.toUpperCase(),qtdPecas:u.value,data:new Date().getTime()}),p.value=await D(),n.value=await y(),f()}catch{console.error("Ouve um erro ao finalizar veículo.")}};async function D(){try{const e=new Date().setHours(0,0,0,0);return await _.dados.where("data").aboveOrEqual(e).toArray()}catch(e){console.error(`Error while searching data: ${e.stack||e}`)}}const x=e=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(e));return(e,s)=>(l(),c("div",S,[t("div",T,[h(t("input",{type:"text",tabindex:"1","onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a),placeholder:"marca",style:{"text-transform":"uppercase"}},null,512),[[m,i.value]]),h(t("input",{type:"text",tabindex:"2","onUpdate:modelValue":s[1]||(s[1]=a=>d.value=a),placeholder:"placa",style:{"text-transform":"uppercase"}},null,512),[[m,d.value]]),h(t("input",{type:"text",tabindex:"3","onUpdate:modelValue":s[2]||(s[2]=a=>u.value=a),placeholder:"qtd peças"},null,512),[[m,u.value]]),t("button",{class:"btn",tabindex:"4",onClick:g},E)]),p.value.length>0?(l(),c("ul",P,[(l(!0),c(V,null,I(p.value,a=>(l(),c("li",{class:"item-list",key:a.id},[t("span",A,v(a.marca),1),t("span",B,v(a.placa),1),t("span",F,v(a.qtdPecas),1),t("span",H,v(x(a.data)),1)]))),128))])):(l(),c("div",M," Adicione um veículo. ")),t("div",{class:"btnShared",onClick:C},z)]))}},$=k(L,[["__scopeId","data-v-c0e6498c"]]);export{$ as default};
