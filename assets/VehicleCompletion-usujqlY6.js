import{_ as T,u as O,r as n,o as B,a as i,c as d,b as s,w as h,v,F as j,e as F,t as m,p as R,f as S}from"./index-zCSp_xzI.js";import{d as _}from"./dexie-SNI3UijA.js";const C=u=>(R("data-v-50dd0257"),u=u(),S(),u),U={class:"VehicleCompletion"},$={class:"inputs"},P=C(()=>s("i",{class:"ri-add-line"},null,-1)),A=[P],E={key:0,class:"list"},M=["onClick"],z={class:"marca"},L={class:"placa"},N={class:"qtd-peca"},W={class:"dataInput"},G={key:1,class:"dataEmpty"},H=C(()=>s("i",{class:"ri-share-forward-2-line"},null,-1)),J=[H],K={__name:"VehicleCompletion",setup(u){const{push:b}=O(),o=n(null),l=n(null),c=n(null),p=n([]),r=n([]),y=n("");B(async()=>{p.value=await D(),r.value=await w(),r.value.length>0&&f()});const k=t=>{b(`/ViewDetails/${t}`)},V=()=>{o.value=null,l.value=null,c.value=null};async function w(){const t=new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date);return(await _.dados.where("data").equals(t).toArray()).map(a=>({marca:a.marca,placa:a.placa,qtdPecas:a.qtdPecas,data:g(a.data)}))}function f(){const t=Object.keys(r.value[0]).join(",")+`
`,e=r.value.map(a=>Object.values(a).join(",")).join(`
`);y.value=t+e}function I(){const t=`Confira os dados do dia:


`+y.value;window.open("https://api.whatsapp.com/send?text="+encodeURIComponent(t))}const q=async()=>{if(!(!o.value||!l.value||!c.value))try{await _.dados.put({marca:o.value.toUpperCase(),placa:l.value.toUpperCase(),qtdPecas:c.value,data:new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date)}),p.value=await D(),r.value=await w(),f(),V()}catch{console.error("Ouve um erro ao finalizar veículo.")}};async function D(){try{const t=new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date);return await _.dados.where("data").equals(t).toArray()}catch(t){console.error(`Error while searching data: ${t.stack||t}`)}}const g=t=>{const e=t.split("/"),a=`${e[2]}-${e[1]}-${e[0]}`,x=new Date(a);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(x)};return(t,e)=>(i(),d("div",U,[s("div",$,[h(s("input",{type:"text",tabindex:"1","onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),placeholder:"marca",style:{"text-transform":"uppercase"}},null,512),[[v,o.value]]),h(s("input",{type:"text",tabindex:"2","onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),placeholder:"placa",style:{"text-transform":"uppercase"}},null,512),[[v,l.value]]),h(s("input",{type:"text",tabindex:"3","onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a),placeholder:"qtd peças"},null,512),[[v,c.value]]),s("button",{class:"btn",tabindex:"4",onClick:q},A)]),p.value.length>0?(i(),d("ul",E,[(i(!0),d(j,null,F(p.value,a=>(i(),d("li",{class:"item-list",key:a.id,onClick:x=>k(a.id)},[s("span",z,m(a.marca),1),s("span",L,m(a.placa),1),s("span",N,m(a.qtdPecas),1),s("span",W,m(g(a.data)),1)],8,M))),128))])):(i(),d("div",G," Adicione um veículo. ")),s("div",{class:"btnShared",onClick:I},J)]))}},Y=T(K,[["__scopeId","data-v-50dd0257"]]);export{Y as default};
